# SpringCloud-从面试题开始

##  什么是微服务？

### 微服务是什么？

- 通常而言，微服务架构是一种架构模式或是一种架构风格，它体长将单一应用程序划分为一组小的服务，每个服务运行在独立的进程中，服务之间进行互相协调，互相配合，为用户提供最终价值。
- 服务之间采用轻量级的通信机制互相沟通（通常是基于HTTP的RESTful API）。
- 每个服务都围绕着具体业务进行构建，并且能够被独立地部署到生产环境、类生产环境等。
- 微服务强调的是服务的大小，它关注的是某一个点，是具体解决某个问题，提供落地对应服务的一个服务应用。

### 微服务与微服务架构

- 微服务架构是一种架构模式，它体长将单一应用划分为一组小的服务，服务之间互相协调，互相配合，为用户提供最终价值。
- 微服务架构风格是将单个应用程序作为一套小型服务开发的方法，每种应用程序都运行在自己的进程中，并与轻量级机制（通常是HTTP资源API）进行通信。
- 这些服务都是围绕业务功能构建的，可以通过全自动部署机制独立部署。这些服务的集中管理最少，可以用不同的编程语言编写，并使用不同的数据存储技术。

## 为什么选择SpringCloud作为微服务架构？

### 各大IT公司用的微服务架构

- 阿里`Dubbo/HSF(High Speed FrameWork)`
- 京东`HSF`
- 新浪微博`Motan`
- 当当网`DubboX`

### 各微服务框架对比

| 功能点/服务框架 |                     Netflix/Spring cloud                     | Motan                                                        | gRPC(google RPC) | Thrif   | Dubbo/DubboX |
| :-------------- | :----------------------------------------------------------: | ------------------------------------------------------------ | ---------------- | ------- | ------------ |
| 功能定位        |                       完整的微服务框架                       | RPC框架，但整合了ZK或Consul，实现集群环境的基本的服务注册/发现 | RPC框架          | RPC框架 | 服务框架     |
| 支持Rest        |             是，Ribbon支持多种可插拔的序列化选择             | 否                                                           | 否               | 否      | 否           |
| 支持RPC         |                              否                              | 是（Hession2）                                               | 是               | 是      | 是           |
| 支持多语言      |                        是（Rest形式）                        | 否                                                           | 是               | 是      | 否           |
| 服务注册/发现   | 是，Eureka是服务注册表，Karyon服务端框架支持服务自注册和健康检查 | 是（zookeeper/consul）                                       | 否               | 否      | 是           |
| 负载均衡        | 是（服务端zuul+客户端Ribbon），Zuul-服务，动态路由，云端负载均衡，Eureka(针对中间层服务) | 是（客户端）                                                 | 否               | 否      | 是（客户端） |
| 配置服务        |     Netflix Archaius Spring Cloud Config Server集中配置      | 是（zookeeper提供）                                          | 否               | 否      | 否           |
| 服务调用链监控  |            是(zuul)，Zuul提供边缘服务，API网关。             | 否                                                           | 否               | 否      | 否           |
| 高可用/容错     |               是（服务端Hystrix+客户端Ribbon）               | 是（客户端）                                                 | 否               | 否      | 是（客户端） |

| 典型应用案例 | Netflix                                           | Sina     | Google                    | Facebook | 阿里             |
| ------------ | ------------------------------------------------- | -------- | ------------------------- | -------- | ---------------- |
| 社区活跃程度 | 高                                                | 一般     | 高                        | 一般     | 已经不维护了     |
| 学习难度     | 中等                                              | 低       | 高                        | 高       | 低               |
| 文档丰富度   | 高                                                | 一般     | 一般                      | 一般     | 高               |
| 其他         | Sring Cloud Bus为我们的应用程序带来了更短管理端点 | 支持降级 | Netflix内部在开发集成gRPC | IDL定义  | 实践的公司比较多 |



## 微服务之间是如何建立通讯的？

- 服务之间采用轻量级的通信机制互相沟通（通常是基于HTTP的RESTful API）。

## SpringCloud和Doubbo有哪些区别？

- SpringCloud活跃度比Dubbo活跃度高

|              |     Dubbo     |         SpringCloud          |
| ------------ | :-----------: | :--------------------------: |
| 服务注册中心 |   Zookeeper   | Spring Cloud Netflix Eureka  |
| 服务调用方式 |      RPC      |           REST API           |
| 服务监控     | Dubbo-monitor |      Spring Boot Admin       |
| 断路器       |    不完善     | Spring Cloud Netflix Hystrix |
| 服务网关     |      无       |  Spring Cloud Netflix Zuul   |
| 分布式配置   |      无       |     Spring Cloud Config      |
| 服务器跟踪   |      无       |     Spring Cloud Sleuth      |
| 消息总线     |      无       |       Spring Cloud Bus       |
| 数据流       |      无       |     Spring Cloud Stream      |
| 批量任务     |      无       |      Spring Cloud Task       |



## SpringBoot和SpringCloud，请谈谈对他们的理解

- SpringBoot专注一快速方便的开发单个个体微服务。
- SpringCloud是关注全局的微服务协调整理治理框架，它将SpringBoot开发的一个个单体微服务整合并管理起来。为各个微服务之间提供、配置管理、服务发现、断路器、路由、微代理、事件总线、全局锁、决策竞选、分布式会话等等集成服务。
- SpringBoot可以离开SpringCloud独立使用开发项目，但是SpringCloud离不开SpringBoot，属于依赖关系。
- SpringBoot专注于快速、方便的开发单个微服务个体，SpringCloud关注全局的服务治理框架。

## 什么是服务熔断？什么是服务降级？

## 微服务的优缺点分别是什么？说下你在项目开发中碰到的坑。

### 微服务的优点

- 每个服务足够内聚，足够小，代码容易理解这样能聚焦一个指定的业务功能或业务需求。
- 开发简单，开发效率提高。
- 微服务能够被小团队独立开发。
- 微服务是松耦合的，是有功能意义的服务，无论是在开发阶段还是在部署阶段都是独立的。
- 微服务能使用不同的语言开发。
- 易于和第三方集成，微服务允许容易且灵活的方式集成自动部署，通过持续集成工具，如`Jenkins`，`Hudson`，`bamboo`。
- 微服务已于被一个开发人员理解，修改和维护。
- 微服务允许你利用融合最新技术。
- 微服务只是业务逻辑的代码，不会与HTML,CSS或其他界面组件混合。
- 每个微服务都有自己的存储能力，可以有自己的数据库。也可以有统一的数据库。

### 微服务的缺点

- 开发人员要处理分布式系统的复杂性。
- 多服务运维难度，随着服务的增加，运维的压力增大。
- 系统部署依赖。
- 服务间通信成本。
- 数据一致性。
- 系统集成测试。
- 性能监控。

## 你所知道的微服务技术栈有哪些？请列举一二。

## eureka和zookeeper都可以提供服务注册和发现功能，请说说他们两个的区别。

## SpringCloud入门概述

### SpringCloud概述

- SpringCloud，基于SpringBoot提供了一套微服务解决方案，包括服务注册与发现，配置中心，全链路监控，服务网关，负载均衡，熔断器等组件，除了基于`NetFlix`的开源组件做高度抽象封装之外，还有一些选型中立的开源组件。

- SpringCloud利用SpringBoot的开发便利性巧妙地简化了分布式系统基础设施的开发，SpringCloud为开发人员提供了快速构建分布式系统的一些工具，包括配置管理、服务发现、断路器、路由、微代理、事件总线、全局锁、决策竞选、分布式会话等等，他们都可以利用SpringBoot的开发风格做到意见启动和部署。

### SpringCloud学习资料

- 官网`http://spring.io/projects/spring-cloud`

- 参考书

  - `https://springcloud.cc/spring-cloud-netflix.html`
  - API说明`https://springcloud.cc/spring-cloud-dalston.html`
  - SpringCloud中文社区`https://springcloud.cc/`

  